input {
	tcp {
		port => 5000
		type => "apache"
	}
}
filter {
	if [type] == "apache" {
		grok {
			match => {"message" => "%{COMBINEDAPACHELOG}"}
		}
		date {
			match => ["timestamp", "dd/MMM/yyyy:HH:mm:ss Z"]
		}
	}
}
output {
	elasticsearch {
		hosts => "elasticsearch:9200"
		user => "elastic"
		password => "changeme"
		index => "demo-apache-log-from-logstash"
		ecs_compatibility => disabled
	}
}
